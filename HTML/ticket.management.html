<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TANIVAN TICKET - DASHBOARD</title>
  <meta name="description"
    content="B·∫£ng ƒëi·ªÅu khi·ªÉn qu·∫£n tr·ªã TANIVAN TICKET - Theo d√µi hi·ªáu su·∫•t, qu·∫£n l√Ω v√© concert v√† c√°c t√†i kho·∫£n ng∆∞·ªùi d√πng">
  <link rel="preload" href="../Images/logo Tanivan.png" as="image">
  <link rel="stylesheet" href="../CSS/ticket.management.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
  <script src="../JS/ticket.management.js" defer></script>
  <script src="../JS/include.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>
</head>

<body>
  <div id="header-placeholder"></div>

  <!-- MAIN LAYOUT -->
  <div class="admin-layout">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" aria-label="Menu ƒëi·ªÅu h∆∞·ªõng ch√≠nh" role="navigation">
      <h2>DANH M·ª§C QU·∫¢N TR·ªä</h2>
      <nav>
        <a href="admin.homepage.html" class="sidebar-link" data-label="Dashboard" data-page="dashboard">
          <span class="menu-text">DASHBOARD</span>
        </a>
        <a href="event.management.html" class="sidebar-link" data-label="Event Management" data-page="tickets">
          <span class="menu-text">QU·∫¢N L√ù S·ª∞ KI·ªÜN</span>
        </a>
        <a href="ticket.management.html" class="sidebar-link" data-label="Ticket Management" data-page="tickets">
          <span class="menu-text">QU·∫¢N L√ù V√â V√Ä GIAO D·ªäCH</span>
        </a>
        <a href="account.management.html" class="sidebar-link" data-label="Account Management" data-page="accounts">
          <span class="menu-text">QU·∫¢N L√ù T√ÄI KHO·∫¢N</span>
        </a>
        <a href="marketing.management.html" class="sidebar-link" data-label="Marketing Management"
          data-page="marketing">
          <span class="menu-text">KHUY·∫æN M√ÉI V√Ä TI·∫æP TH·ªä</span>
          <i class="menu-indicator"></i>
        </a>

      </nav>
    </aside>
    <!-- MAIN CONTENT -->
    <main class="dashboard-content" id="main-content" tabindex="-1">
      <header class="page-header">
        <h2>üéüÔ∏è Qu·∫£n l√Ω V√© & Giao d·ªãch</h2>
        <p>Theo d√µi, t√¨m ki·∫øm v√† x·ª≠ l√Ω t·∫•t c·∫£ c√°c ƒë∆°n h√†ng v√©.</p>

        <!-- ===== B·ªî SUNG N√öT N√ÄY V√ÄO ƒê√ÇY ===== -->
        <button class="btn-refresh-icon" id="refreshOrdersBtn" aria-label="L√†m m·ªõi d·ªØ li·ªáu">
          <i class="fas fa-sync-alt"></i>
        </button>
        <!-- ==================================== -->

      </header>

      <!-- SUMMARY BAR -->
      <section class="summary-bar">
        <div class="summary-card">
          <div class="summary-icon icon-pending"><i class="fas fa-hourglass-half"></i></div>
          <div class="summary-text"><span class="summary-value" id="summary-pending">0</span><span
              class="summary-label">Ch·ªù x·ª≠ l√Ω</span></div>
        </div>
        <div class="summary-card">
          <div class="summary-icon icon-success"><i class="fas fa-check-circle"></i></div>
          <div class="summary-text"><span class="summary-value" id="summary-paid">0</span><span
              class="summary-label">Th√†nh c√¥ng (h√¥m nay)</span></div>
        </div>
        <!-- Removed cancelled & refund summary cards ‚Äî system only has Pending and Paid statuses -->
      </section>

      <!-- FILTER BAR -->
      <section class="filter-bar">
        <div class="filter-group main-search">
          <i class="fas fa-search"></i>
          <input type="text" id="mainSearch" placeholder="T√¨m theo M√£ ƒêH, T√™n kh√°ch h√†ng, Email..."
            class="filter-input">
        </div>
        <div class="filter-group">
          <select id="statusFilter" class="filter-select">
            <option value="">T·∫•t c·∫£ Tr·∫°ng th√°i</option>
            <option value="pending">Ch·ªù thanh to√°n</option>
            <option value="paid">ƒê√£ thanh to√°n</option>
          </select>
        </div>
        <div class="filter-group">
          <select id="eventFilter" class="filter-select">
            <option value="">T·∫•t c·∫£ S·ª± ki·ªán</option>
            <!-- JS s·∫Ω ƒëi·ªÅn c√°c s·ª± ki·ªán v√†o ƒë√¢y -->
          </select>
        </div>
        <div class="filter-group">
          <input type="date" id="dateFrom" class="filter-input">
          <span>-</span>
          <input type="date" id="dateTo" class="filter-input">
        </div>
      </section>

      <!-- ORDER TABLE -->
      <section class="order-table-container">
        <table class="order-table" id="orderTable">
          <thead>
            <tr>
              <th><input type="checkbox" id="selectAllCheckbox"></th>
              <th>M√£ ƒêH</th>
              <th>Kh√°ch h√†ng</th>
              <th>S·ª± ki·ªán</th>
              <th>Ng√†y t·∫°o</th>
              <th>T·ªïng ti·ªÅn</th>
              <th>Tr·∫°ng th√°i</th>
              <th>H√†nh ƒë·ªông</th>
            </tr>
          </thead>
          <tbody id="orderTableBody">
            <!-- D·ªØ li·ªáu ƒë∆°n h√†ng s·∫Ω ƒë∆∞·ª£c render v√†o ƒë√¢y -->
          </tbody>
        </table>
        <div class="table-footer">
          <div class="bulk-actions">
            <select id="bulkActionSelect" disabled>
              <option>H√†nh ƒë·ªông h√†ng lo·∫°t</option>
              <option value="mark_paid">ƒê√°nh d·∫•u ƒê√£ thanh to√°n</option>
            </select>
            <button id="applyBulkActionBtn" disabled>√Åp d·ª•ng</button>
          </div>
          <div class="pagination" id="pagination"></div>
        </div>
      </section>

      <!-- ORDER DETAIL MODAL -->
      <div class="modal" id="orderDetailModal">
        <div class="modal-content">
          <button class="modal-close" id="modalCloseBtn"><i class="fas fa-times"></i></button>
          <h3 id="modalTitle">Chi ti·∫øt ƒê∆°n h√†ng #TNV10001</h3>
          <div class="modal-body">
            <div class="modal-grid">
              <!-- Th√¥ng tin kh√°ch h√†ng -->
              <div class="modal-section" id="customerInfoSection">
                <h4><i class="fas fa-user"></i> Th√¥ng tin kh√°ch h√†ng</h4>
                <div class="info-pair">
                  <span class="info-label">T√™n:</span>
                  <span class="info-value" id="modal-customer-name"></span>
                </div>
                <div class="info-pair">
                  <span class="info-label">Email:</span>
                  <span class="info-value" id="modal-customer-email"></span>
                </div>
              </div>

              <!-- Chi ti·∫øt v√© -->
              <div class="modal-section" id="ticketInfoSection">
                <h4><i class="fas fa-ticket-alt"></i> Chi ti·∫øt v√©</h4>
                <div id="modal-ticket-details">
                  <!-- JS s·∫Ω render chi ti·∫øt v√© v√†o ƒë√¢y -->
                </div>
                <hr>
                <div class="info-pair total">
                  <strong>T·ªïng c·ªông</strong>
                  <strong id="modal-total-price"></strong>
                </div>
              </div>

              <!-- Th√¥ng tin thanh to√°n -->
              <div class="modal-section full-width" id="paymentInfoSection">
                <h4><i class="fas fa-credit-card"></i> Th√¥ng tin thanh to√°n</h4>
                <div class="info-pair">
                  <span class="info-label">Ng√†y t·∫°o:</span>
                  <span class="info-value" id="modal-order-date"></span>
                </div>
                <div class="info-pair">
                  <span class="info-label">Tr·∫°ng th√°i:</span>
                  <select id="modalStatusSelect" class="filter-select">
                    <option value="pending">Ch·ªù thanh to√°n</option>
                    <option value="paid">ƒê√£ thanh to√°n</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <!-- N√∫t h√†nh ƒë·ªông trong modal -->
          <div class="modal-actions">
            <button class="btn-secondary" id="resendEmailBtn"><i class="fas fa-envelope"></i> G·ª≠i l·∫°i email</button>
            <button class="btn-danger" id="cancelOrderBtn"><i class="fas fa-ban"></i> H·ªßy ƒë∆°n h√†ng</button>
            <button class="btn-primary" id="saveOrderBtn"><i class="fas fa-save"></i> L∆∞u thay ƒë·ªïi</button>
          </div>
        </div>
      </div>
    </main>
    </div>

      <footer id="footer-placeholder"></footer>
</body>

</html>